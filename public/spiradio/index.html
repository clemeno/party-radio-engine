<!DOCTYPE html>
<html lang="fr">

  <head>
    <meta charset="UTF-8">
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0"
    >
    <title>SpiRadio</title>
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700,400italic|Material+Icons"
    >
    <link
      rel="stylesheet"
      href="https://unpkg.com/vue-material/dist/vue-material.min.css"
    >
    <link
      rel="stylesheet"
      href="https://unpkg.com/vue-material/dist/theme/default.css"
    >
    <style>

    </style>
  </head>

  <body>

    <div id="app">

      <h1>SpiRadio</h1>

      <div>
        <h2>Now Playing</h2>
        <div>
          <h3>Radio</h3>
          <md-button class="md-icon-button md-dense md-primary">
            <md-icon>play_arrow</md-icon>
          </md-button>
        </div>
        <div>{{ radio.currentTitleDisplay }}</div>
        <div>
          <h3>Perso</h3>
          <md-button class="md-icon-button md-dense md-primary">
            <md-icon>play_arrow</md-icon>
          </md-button>
        </div>
        <div>{{ perso.currentTitleDisplay }}</div>
      </div>

      <div>
        <h2>Flux</h2>
      </div>

      <div>
        <h2>Player</h2>
        <div>
          <div>
            <md-button class="md-icon-button md-dense md-primary">
              <md-icon>skip_previous</md-icon>
            </md-button>
            <md-button class="md-icon-button md-dense md-primary">
              <md-icon>play_arrow</md-icon>
            </md-button>
            <md-button class="md-icon-button md-dense md-primary">
              <md-icon>pause</md-icon>
            </md-button>
            <md-button class="md-icon-button md-dense md-primary">
              <md-icon>stop</md-icon>
            </md-button>
            <md-button class="md-icon-button md-dense md-primary">
              <md-icon>skip_next</md-icon>
            </md-button>
          </div>
          <div>
            <md-button class="md-icon-button md-dense md-primary">
              <md-icon>volume_up</md-icon>
            </md-button>
            <md-button class="md-icon-button md-dense md-primary">
              <md-icon>volume_off</md-icon>
            </md-button>
          </div>
        </div>
      </div>

      <div>
        <h2>Online</h2>

      </div>

      <div>
        <h2>Chat</h2>
        <textarea
          v-model="chat.messagesDisplay"
          rows="20"
          cols="80"
        ></textarea>
        <input
          v-on:keyup.enter="sendMessage"
          v-model="chat.message"
          type="text"
          placeholder="Message"
        >
      </div>

    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.3.0/socket.io.js"></script>

    <script src="https://unpkg.com/vue"></script>
    <script src="https://unpkg.com/vue-material"></script>
    <script>Vue.use( VueMaterial.default )</script>
    <script>
      Vue.material = {
        ...Vue.material,

        // activeness of ripple effect
        ripple: true,

        theming: {},
        locale: {
          ...Vue.material.locale,

          // range for datepicker
          startYear: 1900,
          endYear: 2099,

          // date format for date picker
          dateFormat: 'yyyy-MM-dd',

          // `0` stand for Sunday, `1` stand for Monday
          firstDayOfAWeek: 1
        }
      }
    </script>

    <script>
      new Vue( {
        el: '#app',
        data: {
          socket: null,
          bRadio: true,
          radio: {
            currentTitleDisplay: ''
          },
          perso: {
            currentTitleDisplay: ''
          },
          flux: {

          },
          player: {

          },
          online: {
            users: []
          },
          chat: {
            messages: [],
            messagesDisplay: '',
            message: ''
          }
        },
        created: function() {
          this.socket = io()
        },
        methods: {
          sendMessage: function() {
            // this.socket.emit( 'CHAT_MESSAGE', this.chat.message )
            this.chat.messages.push( `${this.chat.message || ''}`.trim() )
            this.chat.message = ''
            if ( 10000 < this.chat.messages.length ) {
              this.chat.messages.splice( 0, 1 )
            }
            this.chat.messagesDisplay = this.chat.messages.join( '\n' )
          }
        },
        destroyed: function() {

        }
      } )
    </script>
  </body>

</html>
